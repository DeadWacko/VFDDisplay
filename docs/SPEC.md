# VFD Display Driver — SPEC & Roadmap

## Цель проекта

Создать универсальный, переиспользуемый и надёжный драйвер VFD-дисплея
для RP2040 с двумя уровнями API:

- низкоуровневый (`display_ll`) — буфер, сегменты, яркость, refresh;
- высокоуровневый (`display_api`) — числа, текст, время, эффекты, оверлеи.

Проект должен легко переноситься между разными приложениями (часы, индикаторы,
аудио-проекты и т.д.) без изменения внутренней логики драйвера.

## Текущее состояние (0.1.x)

- Монолитный драйвер в `src/display.c`.
- Один основной пример: `examples/clock_stress_test`.
- Старый заголовок `include/display.h` содержит смешанный API.
- Добавлены новые заголовки:
  - `include/display_ll.h`
  - `include/display_api.h`

## Ближайшие версии

### 0.2.0 — LL/HL API skeleton

- [x] Структурировать репозиторий (`src/`, `include/`, `examples/`, `docs/`).
- [x] Добавить заголовки `display_ll.h` и `display_api.h`.
- [x] Добавить базовую архитектурную документацию.
- [ ] Начать вынос low-level логики из `display.c` в LL-слой.

### 0.3.0 — Эффекты и оверлеи как отдельный слой

- [ ] Вынести эффекты в `display_fx.c`.
- [ ] Вынести оверлеи в `display_overlay.c`.
- [ ] Ввести единый heartbeat таймер для анимаций (60 FPS).
- [ ] Переписать эффекты с использованием гамма-коррекции.

### 0.4.0 — Новый публичный API

- [ ] Реализовать основные функции `display_api.h`:
  - `display_show_number()`
  - `display_show_text()`
  - `display_show_time()`
  - эффекты `display_fx_*`
  - оверлеи `display_overlay_*`
- [ ] Обновить пример `clock_stress_test` на использование `display_api.h`.
- [ ] Обновить `docs/API.md` и `docs/FX.md`.

### 0.5.0 — PIO backend (опционально)

- [ ] Исследовать возможность переноса части LL-логики в PIO.
- [ ] Добавить альтернативную реализацию LL-слоя на PIO.

## Требования к качеству

- Не ломать существующие примеры при рефакторинге.
- Любая новая фича сопровождается:
  - обновлением API-документации;
  - коротким примером использования в `examples/`.
- Все изменения проходят через понятные коммиты, отражающие шаги рефакторинга.
