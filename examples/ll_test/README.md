
# VFD Low-Level Driver Test (ll_test)

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ –¥—Ä–∞–π–≤–µ—Ä–∞ –¥–∏—Å–ø–ª–µ—è (LL API) –¥–ª—è RP2040.**

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π `display_ll` –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π. –û–Ω —Å–ª—É–∂–∏—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (Wiring check), —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã –®–ò–ú (PWM) –∏ –≥–∞–º–º–∞-–∫–æ—Ä—Ä–µ–∫—Ü–∏–∏.

---

##  –ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–¥–≤–∏–≥–æ–≤—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ **74HC595**.
–ü–∏–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ `main.c`):

| –§—É–Ω–∫—Ü–∏—è –¥—Ä–∞–π–≤–µ—Ä–∞ | –ü–∏–Ω RP2040 (GPIO) | –ü–∏–Ω 74HC595 | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :---: | :---: | :--- |
| **DATA** | **GP15** | 14 (DS) | –í—Ö–æ–¥ –¥–∞–Ω–Ω—ã—Ö (Serial Data) |
| **CLOCK** | **GP14** | 11 (SH_CP) | –¢–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–¥–≤–∏–≥–∞ (Shift Clock) |
| **LATCH** | **GP13** | 12 (ST_CP) | –ó–∞—â–µ–ª–∫–∞ –≤—ã—Ö–æ–¥–∞ (Storage Clock) |

> **–í–∞–∂–Ω–æ:** –î—Ä–∞–π–≤–µ—Ä –æ–∂–∏–¥–∞–µ—Ç, —á—Ç–æ –≤ —Ü–µ–ø–æ—á–∫–µ —Å–¥–≤–∏–≥–æ–≤—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ —Å–Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –±–∏—Ç—ã –≤—ã–±–æ—Ä–∞ —Å–µ—Ç–∫–∏ (Grids), –∞ –∑–∞—Ç–µ–º –±–∏—Ç—ã —Å–µ–≥–º–µ–Ω—Ç–æ–≤ (Segments).

---

## üõ† –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç —Ç–µ—Å—Ç?

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç 3 —ç—Ç–∞–ø–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

### 1. –¢–µ—Å—Ç –∞–¥—Ä–µ—Å–∞—Ü–∏–∏ (¬´–ë–µ–≥—É—â–∞—è —Ü–∏—Ñ—Ä–∞¬ª)
*   **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:** –¶–∏—Ñ—Ä–∞ `8` –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∑–∞–∂–∏–≥–∞–µ—Ç—Å—è –Ω–∞ –∫–∞–∂–¥–æ–º —Ä–∞–∑—Ä—è–¥–µ —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ.
*   **–ó–∞—á–µ–º:** –ü–æ–∑–≤–æ–ª—è–µ—Ç —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ª–∏–Ω–∏–∏ —Å–µ—Ç–æ–∫ (Grid pins) –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –∏ –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

### 2. –¢–µ—Å—Ç –∑–∞—Å–≤–µ—Ç–∫–∏ (¬´Full Fill¬ª)
*   **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:** –ù–∞ –≤—Å–µ—Ö —Ä–∞–∑—Ä—è–¥–∞—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–≥–æ—Ä–∞—é—Ç—Å—è –≤—Å–µ —Å–µ–≥–º–µ–Ω—Ç—ã (—Ü–∏—Ñ—Ä–∞ `8`).
*   **–ó–∞—á–µ–º:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ "—Ç–µ–Ω–µ–π" (Ghosting). –ï—Å–ª–∏ —Å–æ—Å–µ–¥–Ω–∏–µ —Ä–∞–∑—Ä—è–¥—ã –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—é—Ç—Å—è –ø–∞—Ä–∞–∑–∏—Ç–Ω–æ, –∑–Ω–∞—á–∏—Ç –º–µ—Ö–∞–Ω–∏–∑–º *Dead Time* –∏–ª–∏ *Anti-Ghosting* —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –ª–∏–±–æ –∞–ø–ø–∞—Ä–∞—Ç–Ω–∞—è —á–∞—Å—Ç—å –∏–º–µ–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã.

### 3. –î—ã—Ö–∞–Ω–∏–µ –∏ –°—á—ë—Ç—á–∏–∫ (–û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª)
*   **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
    *   –°–ø—Ä–∞–≤–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å—á–µ—Ç—á–∏–∫, –∫–æ—Ç–æ—Ä—ã–π —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ ~160 –º—Å.
    *   –Ø—Ä–∫–æ—Å—Ç—å –≤—Å–µ–≥–æ –¥–∏—Å–ø–ª–µ—è –ø–ª–∞–≤–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è –æ—Ç 0 –¥–æ 100% –∏ –æ–±—Ä–∞—Ç–Ω–æ (—ç—Ñ—Ñ–µ–∫—Ç "–¥—ã—Ö–∞–Ω–∏–µ").
*   **–ó–∞—á–µ–º:**
    *   –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã **PWM** (–®–ò–ú) —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∏ —è—Ä–∫–æ—Å—Ç–∏.
    *   –ü—Ä–æ–≤–µ—Ä–∫–∞ **–ì–∞–º–º–∞-–∫–æ—Ä—Ä–µ–∫—Ü–∏–∏** (–ø–ª–∞–≤–Ω–æ—Å—Ç—å –Ω–∞—Ä–∞—Å—Ç–∞–Ω–∏—è —è—Ä–∫–æ—Å—Ç–∏ –¥–ª—è —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ –≥–ª–∞–∑–∞).
    *   –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Ç–∞–π–º–µ—Ä–æ–≤ –ø—Ä–∏ —á–∞—Å—Ç—ã—Ö –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è—Ö.

---

## –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

–ü—Ä–∏–º–µ—Ä —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –ø—Ä–æ–µ–∫—Ç–∞ `VFDDisplay`.

1.  –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞–ø–∫–∞ –ø—Ä–∏–º–µ—Ä–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `ll_test` (–¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è `CMakeLists.txt`).
2.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É —Å–±–æ—Ä–∫–∏:
    ```bash
    cd VFDDisplay
    mkdir build
    cd build
    ```
3.  –°–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç (—É–∫–∞–∂–∏—Ç–µ –≤–∞—à—É –ø–ª–∞—Ç—É, –Ω–∞–ø—Ä–∏–º–µ—Ä `pico` –∏–ª–∏ `pico_w`):
    ```bash
    cmake -DPICO_BOARD=pico_w ..
    ```
4.  –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
    ```bash
    make ll_test
    # –∏–ª–∏, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Ninja:
    ninja ll_test
    ```
5.  –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª `examples/ll_test/ll_test.uf2` –Ω–∞ –≤–∞—à—É –ø–ª–∞—Ç—É RP2040.

---

## üß©–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞

*   **–ê–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å:** –ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É —à—Ä–∏—Ñ—Ç–æ–≤ (`FONT_DIGITS`) –≤–Ω—É—Ç—Ä–∏ `main.c`, –ø–æ—ç—Ç–æ–º—É –æ–Ω –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `display_font`), —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –∏–¥–µ–∞–ª—å–Ω—ã–º –¥–ª—è "—á–∏—Å—Ç–æ–π" –æ—Ç–ª–∞–¥–∫–∏ –∂–µ–ª–µ–∑–∞.
*   **–í—ã–≤–æ–¥ –æ—à–∏–±–æ–∫:** –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–Ω–µ–≤–µ—Ä–Ω—ã–µ –ø–∏–Ω—ã) –ø—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–≤–µ–¥–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ USB UART (`stdout`) –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –∫ USB –ø–æ—Ä—Ç—É Pico –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤.

```c
// –§—Ä–∞–≥–º–µ–Ω—Ç main.c –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
#define VFD_DATA_PIN      15
#define VFD_CLOCK_PIN     14
#define VFD_LATCH_PIN     13
#define VFD_DIGIT_COUNT   4
#define VFD_REFRESH_HZ    120
```
