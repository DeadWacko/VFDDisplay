

[![License](https://img.shields.io/github/license/DeadWacko/VFDDisplay?style=flat-square)](LICENSE)
[![Last commit](https://img.shields.io/github/last-commit/DeadWacko/VFDDisplay?style=flat-square)](https://github.com/DeadWacko/VFDDisplay/commits)
[![GitHub stars](https://img.shields.io/github/stars/DeadWacko/VFDDisplay?style=flat-square)](https://github.com/DeadWacko/VFDDisplay/stargazers)
[![GitHub issues](https://img.shields.io/github/issues/DeadWacko/VFDDisplay?style=flat-square)](https://github.com/DeadWacko/VFDDisplay/issues)

# VFDDisplay Library (v4.0)

**–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è VFD (–≤–∞–∫—É—É–º–Ω–æ-–ª—é–º–∏–Ω–µ—Å—Ü–µ–Ω—Ç–Ω—ã–º–∏) –¥–∏—Å–ø–ª–µ—è–º–∏ –Ω–∞ –±–∞–∑–µ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ RP2040 (Raspberry Pi Pico).**

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –¥—Ä–∞–π–≤–µ—Ä–∞ —Å –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–º –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ–º, –∑–∞—â–∏—Ç–æ–π –æ—Ç –ø–∞—Ä–∞–∑–∏—Ç–Ω–æ–π –∑–∞—Å–≤–µ—Ç–∫–∏ (anti-ghosting) –∏  –¥–≤–∏–∂–∫–æ–º –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π.

---

## üî• –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### Low-Level Driver (LL)
*   **Thread-Safe:** –ê—Ç–æ–º–∞—Ä–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –±—É—Ñ–µ—Ä–∞–º, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≥–æ–Ω–æ–∫ –¥–∞–Ω–Ω—ã—Ö –∏ Deadlock-–æ–≤.
*   **Anti-Ghosting:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω Dead-time (10 –º–∫—Å) –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞—Å–≤–µ—Ç–∫–∏ —Å–æ—Å–µ–¥–Ω–∏—Ö —Ä–∞–∑—Ä—è–¥–æ–≤.
*   **Performance:** –†–∞–∑–≤–µ—Ä—Ç–∫–∞ –Ω–∞ –±–∞–∑–µ `repeating_timer` –∏ `hardware_alarm` (–±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ CPU).
*   **Gamma Correction:** –ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è —è—Ä–∫–æ—Å—Ç–∏ ($x^2$).
*   **8-bit PWM:** –ü–ª–∞–≤–Ω–∞—è —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ —è—Ä–∫–æ—Å—Ç–∏ (256 —É—Ä–æ–≤–Ω–µ–π) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑—Ä—è–¥–∞.

### High-Level Core (HL)
*   **FX Engine v4.0:** 10 –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (Matrix, Glitch, Marquee –∏ –¥—Ä.).
*   **Transparency:** "–ü—Ä–æ–∑—Ä–∞—á–Ω—ã–µ" —ç—Ñ—Ñ–µ–∫—Ç—ã —è—Ä–∫–æ—Å—Ç–∏ –Ω–∞–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –ø–æ–≤–µ—Ä—Ö –∏–¥—É—â–∏—Ö —á–∞—Å–æ–≤.
*   **Text Engine:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–µ–≥—É—â–µ–π —Å—Ç—Ä–æ–∫–∏ –∏ –≤—ã–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ (Digits + Alpha).
*   **Overlay System:** –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (Boot, Wi-Fi, Errors).
*   **Smart Features:** –ê–≤—Ç–æ—è—Ä–∫–æ—Å—Ç—å (ADC), –Ω–æ—á–Ω–æ–π —Ä–µ–∂–∏–º, –º–∏–≥–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç–æ—á–µ–∫.

---

##  –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞ –Ω–∞ —Ä–∞–±–æ—Ç—É —á–µ—Ä–µ–∑ —Å–¥–≤–∏–≥–æ–≤—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã **74HC595** (–∫–∞—Å–∫–∞–¥).

**–°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö:**
1.  –ü–µ—Ä–≤—ã–π —Ä–µ–≥–∏—Å—Ç—Ä (–∏–ª–∏ –≥—Ä—É–ø–ø–∞): **–°–µ—Ç–∫–∏ (Grids)**.
2.  –í—Ç–æ—Ä–æ–π —Ä–µ–≥–∏—Å—Ç—Ä (–∏–ª–∏ –≥—Ä—É–ø–ø–∞): **–°–µ–≥–º–µ–Ω—Ç—ã (Segments)**.

**–ü–∏–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (RP2040):**
*   **DATA (DS):** GP15
*   **CLOCK (SH_CP):** GP14
*   **LATCH (ST_CP):** GP13
*   **ADC (Light Sensor):** GP26 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

##  –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–±–æ—Ä–∫–∞
–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π **CMake**.

```bash
mkdir build
cd build
cmake ..
make
```

### 2. –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (Main Loop)

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —á–∞—Å–æ–≤ —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º "–¥—ã—Ö–∞–Ω–∏—è".

```c
#include "pico/stdlib.h"
#include "display_api.h"

int main() {
    stdio_init_all();
    
    // 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (4 —Ä–∞–∑—Ä—è–¥–∞)
    display_init(4);
    
    // 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞
    display_set_brightness(255);
    display_set_dot_blinking(true);
    
    // 3. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è (–¢–µ–∫—Å—Ç –≤—ã–µ–∑–∂–∞–µ—Ç —Å–ø—Ä–∞–≤–∞)
    display_fx_slide_in("HELLO", 150);
    
    // 4. –ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª
    while (true) {
        // –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: –¢–∏–∫ –¥–≤–∏–∂–∫–∞ (–ê–Ω–∏–º–∞—Ü–∏–∏, –Ø—Ä–∫–æ—Å—Ç—å, –ú—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏–Ω–≥)
        display_process();
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ (–≤–∞—à–∞ –ª–æ–≥–∏–∫–∞)
        // display_show_time(hour, min, true);
        
        // –ó–∞–ø—É—Å–∫ —ç—Ñ—Ñ–µ–∫—Ç–∞ –ø–æ —Å–æ–±—ã—Ç–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥—ã—Ö–∞–Ω–∏–µ)
        if (!display_is_effect_running()) {
             display_fx_pulse(5000);
        }

        sleep_ms(5);
    }
}
```

---

## üé® –°–∏—Å—Ç–µ–º–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (FX)

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –≤–∫–ª—é—á–∞–µ—Ç 3 —Ç–∏–ø–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤:

1.  **–ü—Ä–æ–∑—Ä–∞—á–Ω—ã–µ (Transparent):** –ú–µ–Ω—è—é—Ç —Ç–æ–ª—å–∫–æ —è—Ä–∫–æ—Å—Ç—å. –ß–∞—Å—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –∏–¥—Ç–∏ —Å–∫–≤–æ–∑—å —ç—Ñ—Ñ–µ–∫—Ç.
    *   `Pulse`, `Wave`, `Scanner` (KITT), `Heartbeat`, `Fade In/Out`.
2.  **–ë–ª–æ–∫–∏—Ä—É—é—â–∏–µ (Blocking):** –ó–∞—Ö–≤–∞—Ç—ã–≤–∞—é—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏. –ö–æ–Ω—Ç–µ–Ω—Ç –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.
    *   `Glitch`, `Morph`, `Dissolve`, `Slot Machine`, `Decode`, `Ping-Pong`.
3.  **–¢–µ–∫—Å—Ç–æ–≤—ã–µ:**
    *   `Marquee` (–ë–µ–≥—É—â–∞—è —Å—Ç—Ä–æ–∫–∞), `Slide In`.

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ API –¥–æ—Å—Ç—É–ø–Ω–æ –≤ –ø–∞–ø–∫–µ `docs/`:

*   [**API Reference**](docs/HL_API.md) ‚Äî –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.
*   [**Low-Level Driver**](docs/LL_API.md) ‚Äî –î–µ—Ç–∞–ª–∏ —Ä–∞–±–æ—Ç—ã –¥—Ä–∞–π–≤–µ—Ä–∞ –∂–µ–ª–µ–∑–∞.
*   [**Architecture**](docs/ARCHITECTURE.md) ‚Äî –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–ª–æ–µ–≤ –∏ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö.
*   [**FX Engine**](docs/FX.md) ‚Äî –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–≤–∏–∂–æ–∫ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤.

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License. Copyright (c) 2025 DeadWacko.