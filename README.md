

[![License](https://img.shields.io/github/license/DeadWacko/VFDDisplay?style=flat-square)](LICENSE)
[![Last commit](https://img.shields.io/github/last-commit/DeadWacko/VFDDisplay?style=flat-square)](https://github.com/DeadWacko/VFDDisplay/commits)
[![GitHub stars](https://img.shields.io/github/stars/DeadWacko/VFDDisplay?style=flat-square)](https://github.com/DeadWacko/VFDDisplay/stargazers)
[![GitHub issues](https://img.shields.io/github/issues/DeadWacko/VFDDisplay?style=flat-square)](https://github.com/DeadWacko/VFDDisplay/issues)

# VFDDisplay Library (v1.3.7)

**Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð´Ð»Ñ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ VFD (Ð²Ð°ÐºÑƒÑƒÐ¼Ð½Ð¾-Ð»ÑŽÐ¼Ð¸Ð½ÐµÑÑ†ÐµÐ½Ñ‚Ð½Ñ‹Ð¼Ð¸) Ð´Ð¸ÑÐ¿Ð»ÐµÑÐ¼Ð¸ Ð½Ð° Ð±Ð°Ð·Ðµ Ð¼Ð¸ÐºÑ€Ð¾ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ð° RP2040 (Raspberry Pi Pico).**

ÐŸÑ€Ð¾ÐµÐºÑ‚ Ñ€ÐµÐ°Ð»Ð¸Ð·ÑƒÐµÑ‚ Ð¼Ð½Ð¾Ð³Ð¾ÑÐ»Ð¾Ð¹Ð½ÑƒÑŽ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñƒ Ð´Ñ€Ð°Ð¹Ð²ÐµÑ€Ð° Ñ Ð°Ð¿Ð¿Ð°Ñ€Ð°Ñ‚Ð½Ñ‹Ð¼ Ð¼ÑƒÐ»ÑŒÑ‚Ð¸Ð¿Ð»ÐµÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼, Ð·Ð°Ñ‰Ð¸Ñ‚Ð¾Ð¹ Ð¾Ñ‚ Ð¿Ð°Ñ€Ð°Ð·Ð¸Ñ‚Ð½Ð¾Ð¹ Ð·Ð°ÑÐ²ÐµÑ‚ÐºÐ¸ (anti-ghosting) Ð¸ Ð¼Ð¾Ñ‰Ð½Ñ‹Ð¼ Ð´Ð²Ð¸Ð¶ÐºÐ¾Ð¼ Ð¿Ñ€Ð¾Ñ†ÐµÐ´ÑƒÑ€Ð½Ñ‹Ñ… Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸Ð¹.

---

## ðŸ”¥ ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸

### Low-Level Driver (LL)
*   **Safe & Fast:** ÐÑ‚Ð¾Ð¼Ð°Ñ€Ð½Ñ‹Ð¹ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº Ð±ÑƒÑ„ÐµÑ€Ð°Ð¼, Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ðµ Ð³Ð¾Ð½Ð¾Ðº Ð´Ð°Ð½Ð½Ñ‹Ñ…. Ð Ð°Ð·Ð²ÐµÑ€Ñ‚ÐºÐ° Ñ‡ÐµÑ€ÐµÐ· `repeating_timer` Ð¸ `hardware_alarm`.
*   **Hardware Config:** ÐŸÐ¾Ð»Ð½Ð°Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° ÐºÐ°ÑÑ‚Ð¾Ð¼Ð½Ð¾Ð¹ Ñ€Ð°ÑÐ¿Ð¸Ð½Ð¾Ð²ÐºÐ¸ GPIO Ð¸ Ñ‡Ð°ÑÑ‚Ð¾Ñ‚Ñ‹ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ.
*   **Anti-Ghosting:** Ð“Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Dead-time (10 Ð¼ÐºÑ) Ð¼ÐµÐ¶Ð´Ñƒ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸ÑÐ¼Ð¸ ÑÐµÑ‚Ð¾Ðº.
*   **Quality:** ÐÐ¿Ð¿Ð°Ñ€Ð°Ñ‚Ð½Ð°Ñ Ð³Ð°Ð¼Ð¼Ð°-ÐºÐ¾Ñ€Ñ€ÐµÐºÑ†Ð¸Ñ ($x^2$) Ð¸ 8-Ð±Ð¸Ñ‚Ð½Ñ‹Ð¹ PWM Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ñ€Ð°Ð·Ñ€ÑÐ´Ð°.

### High-Level Core (HL)
*   **FX Engine:** 10 Ð²ÑÑ‚Ñ€Ð¾ÐµÐ½Ð½Ñ‹Ñ… ÑÑ„Ñ„ÐµÐºÑ‚Ð¾Ð² (Matrix, Glitch, Morph Ð¸ Ð´Ñ€.) Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¾Ð¹ Ð¿Ñ€Ð¾Ð·Ñ€Ð°Ñ‡Ð½Ð¾ÑÑ‚Ð¸.
*   **Smart Layers:** ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚Ð°Ð¼Ð¸ (ÐžÐ²ÐµÑ€Ð»ÐµÐ¹ > Ð­Ñ„Ñ„ÐµÐºÑ‚ > ÐšÐ¾Ð½Ñ‚ÐµÐ½Ñ‚).
*   **Flexible Dots:** Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ€Ð°Ð·Ð´ÐµÐ»Ð¸Ñ‚ÐµÐ»ÑÐ¼Ð¸ (Ñ‚Ð¾Ñ‡ÐºÐ°Ð¼Ð¸) Ð½ÐµÐ·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ Ð¾Ñ‚ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ð° (Static/Blink Ñ€ÐµÐ¶Ð¸Ð¼Ñ‹).
*   **System Control:** ÐÐ²Ñ‚Ð¾ÑÑ€ÐºÐ¾ÑÑ‚ÑŒ (Ð¿Ð¾ Ð´Ð°Ñ‚Ñ‡Ð¸ÐºÑƒ), Ð½Ð¾Ñ‡Ð½Ð¾Ð¹ Ñ€ÐµÐ¶Ð¸Ð¼, ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ðµ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ (Boot, WiFi).

---

## ðŸ”Œ ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ

Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ñ€Ð°ÑÑÑ‡Ð¸Ñ‚Ð°Ð½Ð° Ð½Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ Ñ‡ÐµÑ€ÐµÐ· ÑÐ´Ð²Ð¸Ð³Ð¾Ð²Ñ‹Ðµ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹ **74HC595** (ÐºÐ°ÑÐºÐ°Ð´Ð½Ð¾Ðµ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ).

**Ð¡Ñ…ÐµÐ¼Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… (Daisy Chain):**
`MCU (RP2040) -> [Register 1: GRIDS] -> [Register 2: SEGMENTS]`

1.  ÐŸÐµÑ€Ð²Ñ‹Ð¹ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€ (Ð¸Ð»Ð¸ Ð³Ñ€ÑƒÐ¿Ð¿Ð°) ÑƒÐ¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ **Ð¡ÐµÑ‚ÐºÐ°Ð¼Ð¸ (Grids)**.
2.  ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ **Ð¡ÐµÐ³Ð¼ÐµÐ½Ñ‚Ð°Ð¼Ð¸ (Segments/Anodes)**.

**ÐŸÐ¸Ð½Ñ‹:**
ÐÐ°ÑÑ‚Ñ€Ð°Ð¸Ð²Ð°ÑŽÑ‚ÑÑ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð½Ð¾ Ð¿Ñ€Ð¸ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸.

---

##  Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚

### 1. Ð¡Ð±Ð¾Ñ€ÐºÐ°
ÐŸÑ€Ð¾ÐµÐºÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ð¹ **CMake**.

```bash
mkdir build
cd build
cmake ..
make
```

### 2. ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ

ÐœÐ¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Ñ ÐºÐ°ÑÑ‚Ð¾Ð¼Ð½Ð¾Ð¹ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÐµÐ¹ Ð¸ ÑÑ„Ñ„ÐµÐºÑ‚Ð°Ð¼Ð¸.

```c
#include "pico/stdlib.h"
#include "display_api.h"
#include "display_ll.h"

int main() {
    stdio_init_all();
    
    // 1. ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ñ (v1.3.0+)
    display_ll_config_t cfg = {
        .data_pin = 2,
        .clock_pin = 3,
        .latch_pin = 4,
        .digit_count = 4,       // 4 Ñ€Ð°Ð·Ñ€ÑÐ´Ð°
        .refresh_rate_hz = 120  // 120 Ð“Ñ†
    };
    
    // 2. Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ
    display_init_ex(&cfg);
    display_set_brightness(200);
    
    // 3. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ñ€Ð°Ð·Ð´ÐµÐ»Ð¸Ñ‚ÐµÐ»Ñ (Ð´Ð»Ñ Ñ‡Ð°ÑÐ¾Ð² HH.MM Ñ‚Ð¾Ñ‡ÐºÐ° Ð½Ð° 2-Ð¼ Ñ€Ð°Ð·Ñ€ÑÐ´Ðµ)
    // ÐœÐ°ÑÐºÐ°: 0010 (binary) -> 2. Ð ÐµÐ¶Ð¸Ð¼: Ð¼Ð¸Ð³Ð°Ð½Ð¸Ðµ.
    display_set_dots_config((1 << 1), true);
    
    // 4. Ð“Ð»Ð°Ð²Ð½Ñ‹Ð¹ Ñ†Ð¸ÐºÐ»
    while (true) {
        // ÐžÐ‘Ð¯Ð—ÐÐ¢Ð•Ð›Ð¬ÐÐž: Ð¢Ð¸Ðº Ð´Ð²Ð¸Ð¶ÐºÐ° (ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ð¸, Ð¯Ñ€ÐºÐ¾ÑÑ‚ÑŒ, ÐœÑƒÐ»ÑŒÑ‚Ð¸Ð¿Ð»ÐµÐºÑÐ¸Ð½Ð³)
        display_process();
        
        // ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ (Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚ show_colon Ñ‚ÐµÐ¿ÐµÑ€ÑŒ Ð¸Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÐµÑ‚ÑÑ)
        // update_my_clock(&h, &m);
        display_show_time(12, 30, false);
        
        // Ð—Ð°Ð¿ÑƒÑÐº ÑÑ„Ñ„ÐµÐºÑ‚Ð° "Ð’Ð¾Ð»Ð½Ð°" Ñ€Ð°Ð· Ð² Ð¼Ð¸Ð½ÑƒÑ‚Ñƒ
        if (new_minute_event && !display_is_effect_running()) {
             display_fx_wave(2000);
        }

        sleep_ms(2);
    }
}
```

---

##  Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° ÑÑ„Ñ„ÐµÐºÑ‚Ð¾Ð² (FX)

Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð²ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ 3 Ñ‚Ð¸Ð¿Ð° ÑÑ„Ñ„ÐµÐºÑ‚Ð¾Ð². ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ ÑÐ¼. Ð² [Effects_System.md](docs/Effects_System.md).

1.  **ÐŸÑ€Ð¾Ð·Ñ€Ð°Ñ‡Ð½Ñ‹Ðµ (Transparent):** ÐœÐµÐ½ÑÑŽÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑÑ€ÐºÐ¾ÑÑ‚ÑŒ. Ð§Ð°ÑÑ‹ Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°ÑŽÑ‚ Ð¸Ð´Ñ‚Ð¸ ÑÐºÐ²Ð¾Ð·ÑŒ ÑÑ„Ñ„ÐµÐºÑ‚.
    *   `Pulse`, `Wave`, `Scanner` (KITT), `Heartbeat`, `Fade In/Out`.
2.  **Ð‘Ð»Ð¾ÐºÐ¸Ñ€ÑƒÑŽÑ‰Ð¸Ðµ (Blocking):** Ð—Ð°Ñ…Ð²Ð°Ñ‚Ñ‹Ð²Ð°ÑŽÑ‚ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐµÐ³Ð¼ÐµÐ½Ñ‚Ð°Ð¼Ð¸. ÐšÐ¾Ð½Ñ‚ÐµÐ½Ñ‚ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÑ‚ÑÑ Ð¿Ð¾ÑÐ»Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ.
    *   `Glitch` (Ð¦Ð¸Ñ„Ñ€Ð¾Ð²Ð¾Ð¹ ÑˆÑƒÐ¼).
    *   `Morph` (ÐŸÐ»Ð°Ð²Ð½Ð¾Ðµ Ð¿Ñ€ÐµÐ²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ðµ Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ñ‚ÐµÐºÑÑ‚Ð° Ð² Ð´Ñ€ÑƒÐ³Ð¾Ð¹).
    *   `Dissolve` (Ð Ð°ÑÑÑ‹Ð¿Ð°Ð½Ð¸Ðµ Ð½Ð° Ð¿Ð¸ÐºÑÐµÐ»Ð¸).
3.  **Ð¢ÐµÐºÑÑ‚Ð¾Ð²Ñ‹Ðµ:**
    *   `Marquee` (Ð‘ÐµÐ³ÑƒÑ‰Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ°), `Slide In`.

---

## ðŸ“š Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ

ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ð¾Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñ‹ Ð¸ API Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ Ð² Ð¿Ð°Ð¿ÐºÐµ `docs/`:

*   [**High-Level API**](docs/HL_API.md) â€” Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ, Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¸ Ð¾Ð²ÐµÑ€Ð»ÐµÐ¸.
*   [**Low-Level Driver**](docs/LL_API.md) â€” ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð´Ñ€Ð°Ð¹Ð²ÐµÑ€Ð°, ÑÑ…ÐµÐ¼Ð° Ð±Ð¸Ñ‚Ð¾Ð² ÑÐµÐ³Ð¼ÐµÐ½Ñ‚Ð¾Ð² (Bit Layout).
*   [**Effects System**](docs/Effects_System.md) â€” ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ð¾Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸Ð¹.
*   [**Architecture**](docs/ARCHITECTURE.md) â€” ÐžÐ±Ñ‰Ð°Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸.

---

## Ð›Ð¸Ñ†ÐµÐ½Ð·Ð¸Ñ

MIT License. Copyright (c) 2025 DeadWacko.